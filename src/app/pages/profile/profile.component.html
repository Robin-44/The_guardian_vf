<div class="container mt-5">
  <h1 class="text-center mb-4" style="color:#0d6efd ;">Réponses au formulaire</h1>

  <table class="table table-hover">
    <thead style="background-color: #0d6efd; color: white;">
      <tr>
        <th>Nom</th>
        <th>Âge</th>
        <th>Sexe</th>
        <th>Poids</th>
        <th>Taille</th>
        <th>Groupe sanguin</th>
        <th>Commentaires</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let response of surveyResponses">
        <td *ngIf="!response.isEditing">{{ response.userName }}</td>
        <td *ngIf="response.isEditing">
          <input [(ngModel)]="response.userName" class="form-control" />
        </td>

        <td *ngIf="!response.isEditing">{{ response.userAge }}</td>
        <td *ngIf="response.isEditing">
          <input [(ngModel)]="response.userAge" class="form-control" type="number" />
        </td>

        <td *ngIf="!response.isEditing">{{ response.userGender }}</td>
        <td *ngIf="response.isEditing">
          <input [(ngModel)]="response.userGender" class="form-control" />
        </td>

        <td *ngIf="!response.isEditing">{{ response.userWeight }}</td>
        <td *ngIf="response.isEditing">
          <input [(ngModel)]="response.userWeight" class="form-control" />
        </td>

        <td *ngIf="!response.isEditing">{{ response.userSize }}</td>
        <td *ngIf="response.isEditing">
          <input [(ngModel)]="response.userSize" class="form-control" />
        </td>

        <td *ngIf="!response.isEditing">{{ response.userBloodType }}</td>
        <td *ngIf="response.isEditing">
          <input [(ngModel)]="response.userBloodType" class="form-control" />
        </td>

        <td *ngIf="!response.isEditing">{{ response.userComments }}</td>
        <td *ngIf="response.isEditing">
          <input [(ngModel)]="response.userComments" class="form-control" />
        </td>

        <td>
          <button class="btn btn-primary btn-sm" *ngIf="!response.isEditing" (click)="editResponse(response)">
            Modifier
          </button>
          <button class="btn btn-success btn-sm" *ngIf="response.isEditing" (click)="saveResponse(response)">
            Enregistrer
          </button>
          <button class="btn btn-danger btn-sm" *ngIf="response.isEditing" (click)="cancelEdit(response)">
            Annuler
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="alert alert-warning mt-5" role="alert">
    <h4 class="alert-heading">Attention !</h4>
    <p>
      Si vous supprimez vos données, toutes les informations associées à votre compte seront
      définitivement effacées : vos réponses au formulaire, vos rappels, vos posologies, et vos
      souscriptions aux notifications. Vous serez également déconnecté.
    </p>
    <hr />
    <button class="btn btn-danger mt-3" (click)="deleteUserData()">
      <i class="fas fa-trash-alt"></i> Supprimer mes données
    </button>
  </div>
<br>
<br>
<h1 class="text-center mb-4" style="color:#0d6efd ;">Les informations récupérées lors de votre connection</h1>
    <table id="tableau" class="table table-bordered table-striped">
      <thead>
        <tr>
          <th class="d-flex justify-content-start align-items-center" scope="col">Nom du champ</th>
          <th scope="col">Valeur</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="d-flex justify-content-start align-items-center">Photo</td>
          <td><img [src]="user.picture" class="rounded-circle img-fluid profile-picture mb-3 mb-md-0" /></td>
        </tr>
        <tr>
          <td class="d-flex justify-content-start align-items-center">Nom</td>
          <td>{{ user.given_name }}</td>
        </tr>
        <tr>
          <td class="d-flex justify-content-start align-items-center">Prenom</td>
          <td>{{ user.family_name }}</td>
        </tr>
        <tr>
          <td class="d-flex justify-content-start align-items-center">Date de création</td>
          <td>{{ user.updated_at }}</td>
        </tr>
        <tr>
          <td class="d-flex justify-content-start align-items-center">Email</td>
          <td>{{ user.email }}</td>
        </tr>
      </tbody>
    </table>
</div>
